<!doctype html>
<html>
<head>
    <title></title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header class="header">
        <p>Beautyful Bicycles</p>
    </header>

    <div id="main">
        <!-- image upload -->
        <h1>image upload</h1>
        <div class="input-container">
        
        <form class="form" method="POST" action="/upload" enctype="multipart/form-data" autocomplete="off">
            <input name="title" placeholder="Title" v-model="title" />
            <input name="description" placeholder="Description" v-model="description" />
            <input name="username" placeholder="Username" v-model="username" />
            <div class="label-container">
                <input id="file" class="inputfile" name="image" type="file" accept="image/*" @change="handleFileChange" />
                <label for="file">choose file</label>
                <button class="upload button" @click="upload">Upload</button>
             </div>
        </form>
    </div>
        
        <!-- render images -->
        <div class="imagecontainer">
            <h1>latest uploads</h1>
            <div v-for="image in images" class="image-box" @click="showComponent(image.id)">
                <img class="img" :src="image.url">
                <h4>{{ image.title }}</h4>
                <p>{{ image.description }}</p>
            </div>
            
        </div>
        <div class="more-container">
            <button v-if="showMore" @click="getMoreImages" id="more" class="more button">more</button>
        </div>
    
         <!-- component for modal show up -->
        <modal-component
            v-if="imageId"
            :image-id="imageId"
            @close="closeComponent"  
            >            
        </modal-component>

    </div>

    <!-- Image modal -->
    <script id="modal" type="text/x-template">
        <div class="modal-container">
            <div class="modal-content">
                <h2 @click="closeModal" class="close-button">X</h2>
                
                <div class="modal-description">
                    <img :src="image.url" alt="">
                    <p>{{image.title}}</p>
                    <p>{{image.description}}</p>
                    <p>uploaded by {{image.username}} on {{image.created_at}} </p>
                </div>
                <div>
                    <comment-component :image-id="imageId"></comment-component>
                </div>
            </div>
        </div>
    </script>
    
    <!-- Comment modal -->
    <script id="comment" type="text/x-template">
            <div class="comment-container">
                <div class="comment-input">

                        <input name="comment" type="text" placeholder="add comment" v-modal="commentNew">
                        <input name="username" type="text" placeholder="your name" v-modal="usernameNew">
                        <button class="button" @click="uploadComment">submit</button>

                </div>
                <div class="comment-display">
                   <p>comment: </p>{{commentNew}}
                   <p>username: </p>{{usernameNew}}
                </div>
            </div>
    </script>



    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>
